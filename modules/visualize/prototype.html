<!DOCTYPE html>
<html>
    <head>
        <script type="module" src = "graph_creator.js"></script>
        <script type="module">
            import {Bus} from '/lib/oidlib-dev.js'

            function workflow_add_graph(topic, message){
                console.log('new workflow message')
                console.log(topic);
                console.log(message);
                if(topic != 'add/node/graph'){
                    return
                }

                let workflow = document.getElementById('workflow');
                workflow.innerHTML+= `${message.graph_id};`
            }

            Bus.i.subscribe('add/node/graph', workflow_add_graph)
            Bus.i.publish('workflow/create/graph',{graph_id: '1', data: null})

        </script>
    </head>
    <body>
        <p>Gr√°ficos no workflow: <span id="workflow"></span></p>
        <create-graph subscribe="workflow/create/graph:create">
    </body>
</html>
<!--Integrando um componente de transformação com um componente de gráfico.
O componente de botão simula um publish ao ser clicado. O componente de filtro recebe o publish
por subscribe, filtra e faz publish dos dados filtradaos, que são recebidos e publicados no gráfico.-->

<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <title>Playground</title>
        <script src="../src/components/filter/filter.js" type="module"></script>
        <script src="../../data/src/components/table-view-oid.js" type="module"></script>
        <script src="https://cdn.jsdelivr.net/npm/danfojs@1.1.2/lib/bundle.min.js"></script>
        <!-- Import DataLabels plugin via CDN -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js@3.0.0/dist/chart.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
        <!-- Import D3 Scale Chromatic via CDN -->
        <script src="https://d3js.org/d3-color.v1.min.js"></script>
        <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
        <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
        <script src="../../visualize/utils/color_generator.js" type="module"></script>
    </head>
    <body>
    <h1>Playground</h1>
    <button-oid label="Start"
                value='{"columns":[{"name": "hospital_id", "type": "number"},{"name": "numero_pacientes", "type": "number"}],"data": [[1, 300],[2, 200],[3, 100],[4, 100],[5, 500]]}'
                publish="click~data/1"></button-oid>
    <filter-oid
        subscribe="data/1~filter"
        publish="filtered~data/2"
        target_column="numero_pacientes"
        operation="gt"
        compared_value="100"
    ></filter-oid>
    
    <graph-oid uid="graph-1" type="linear_regression" fields='{"y1": 0, "y2": 1, "x": 2}' subscribe="data/2~render"></graph-oid>
    <canvas id="forcing-canvas"></canvas>
</body>
</html>